<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallet Watch — Personal Expense Tracker</title>
  <style>
    :root{
      --bg:#f6f6f8;
      --card:#ffffff;
      --muted:#9aa0a6;
      --accent:#2fa36f;
      --danger:#e05656;
      --primary:#3b82f6;
      --glass: rgba(255,255,255,0.7);
      --max-width:980px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
    }

    html,body{height:100%;}
    body{
      margin:0;
      background:linear-gradient(180deg,#f2f5f7 0%, #fbfbfd 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px 16px;
    }

    .app{
      width:100%;
      max-width:var(--max-width);
      background:var(--card);
      border-radius:18px;
      box-shadow:0 8px 30px rgba(30,30,60,0.06);
      padding:28px;
      box-sizing:border-box;
    }

    header{ text-align:center; margin-bottom:18px }
    header h1{ margin:0; font-size:22px }
    header p{ margin:6px 0 0; color:var(--muted); font-size:13px }

    .top-cards{ display:flex; gap:14px; margin:18px 0 26px; }
    .card{ flex:1; background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01)); padding:14px; border-radius:8px; display:flex; align-items:center; justify-content:space-between; }
    .card .label{ font-size:13px; color:var(--muted); }
    .card .value{ font-weight:700; font-size:18px; }

    .card.income{ border-left:6px solid #2fa36f }
    .card.expense{ border-left:6px solid #e05656 }
    .card.net{ border-left:6px solid #3b82f6 }

    .grid{ display:grid; grid-template-columns:1fr 320px; gap:18px; align-items:start }

    /* form */
    form{ background:transparent; display:flex; gap:8px; flex-wrap:wrap; align-items:center }
    .form-row{ display:flex; gap:8px; width:100%; }
    input[type=text], input[type=number], select{ padding:10px 12px; border-radius:6px; border:1px solid #e6e7ea; min-width:0; font-size:14px }
    input[type=number]{ max-width:200px }

    .submit{ background:var(--accent); border:none; color:white; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:600 }

    /* right column */
    .controls{ background:linear-gradient(180deg,#fff, #fbfbfd); padding:12px; border-radius:8px; box-shadow:0 4px 12px rgba(20,20,40,0.03) }
    .controls label{ font-size:13px; color:var(--muted) }
    .controls select{ width:100%; margin-top:8px }

    /* list */
    .transactions{ margin-top:20px }

    .tx{ display:flex; align-items:center; justify-content:space-between; padding:12px 10px; border-radius:8px; background:linear-gradient(180deg, rgba(0,0,0,0.01), rgba(0,0,0,0.005)); margin-bottom:12px }
    .tx .left{ display:flex; gap:12px; align-items:center }
    .dot{ width:10px; height:10px; border-radius:50% }
    .tx .desc{ font-weight:600 }
    .tx .type{ font-size:12px; color:var(--muted); margin-top:4px }
    .tx .amount{ font-weight:700 }

    .actions{ display:flex; gap:8px }
    .btn{ border:none; padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:600 }
    .btn.edit{ background:#10b981; color:white }
    .btn.delete{ background:#ef4444; color:white }

    footer{ margin-top:18px; display:flex; gap:8px; align-items:center; justify-content:flex-end }
    .muted{ color:var(--muted); font-size:13px }

    @media (max-width:820px){
      .grid{ grid-template-columns:1fr; }
      .top-cards{ flex-direction:column }
      .card{ justify-content:flex-start; gap:12px }
      footer{ justify-content:center }
    }

  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <h1>Wallet Watch</h1>
      <p>Simple income & expense tracker — persistent in your browser</p>
    </header>

    <div class="top-cards">
      <div class="card income">
        <div>
          <div class="label">Total Income</div>
          <div class="value" id="total-income">$0.00</div>
        </div>
        <div style="opacity:0.6">+</div>
      </div>

      <div class="card expense">
        <div>
          <div class="label">Total Expenses</div>
          <div class="value" id="total-expenses">$0.00</div>
        </div>
        <div style="opacity:0.6">-</div>
      </div>

      <div class="card net">
        <div>
          <div class="label">Net Balance</div>
          <div class="value" id="net-balance">$0.00</div>
        </div>
        <div style="opacity:0.6">=</div>
      </div>
    </div>

    <div class="grid">
      <section>
        <form id="tx-form">
          <div class="form-row">
            <input id="desc" type="text" placeholder="Description" required />
            <input id="amount" type="number" step="0.01" placeholder="Amount" required />
            <select id="type">
              <option value="income">Income</option>
              <option value="expense">Expense</option>
            </select>
            <button class="submit" id="submit">Add</button>
          </div>
        </form>

        <div class="transactions" id="tx-list" aria-live="polite"></div>
      </section>

      <aside class="controls">
        <label for="filter">Filter by</label>
        <select id="filter" aria-label="Filter transactions">
          <option value="all">All</option>
          <option value="income">Income</option>
          <option value="expense">Expense</option>
        </select>

        <div style="margin-top:12px; display:flex; gap:8px;">
          <button class="btn" id="clear-all" style="background:#f3f4f6">Clear All</button>
          
        </div>

        <div style="margin-top:12px;">
          <div class="muted">Tip</div>
          <div class="muted" style="margin-top:6px; font-size:13px">This app stores data locally. Use export/import to move between machines.</div>
        </div>
      </aside>
    </div>

    <footer>
      <div class="muted">GYIDIE KWAME FREDUA ADU-GYASI</div>
    </footer>
  </div>

  <script>
    // Simple, readable vanilla JS tracker
    const LS_KEY = 'wallet_watch_v1';

    const $ = id => document.getElementById(id);
    const format = n => {
      const sign = n < 0 ? '-' : '';
      const x = Math.abs(Number(n) || 0).toFixed(2);
      return sign + '$' + Number(x).toLocaleString();
    }

    let state = { transactions: [] };
    const load = () => {
      try{
        const raw = localStorage.getItem(LS_KEY);
        if(raw) state = JSON.parse(raw);
      }catch(e){ console.warn('load failed', e) }
    }
    const save = () => localStorage.setItem(LS_KEY, JSON.stringify(state));

    const calc = () => {
      const inc = state.transactions.filter(t => t.type==='income').reduce((s,t)=>s + Number(t.amount),0);
      const exp = state.transactions.filter(t => t.type==='expense').reduce((s,t)=>s + Number(t.amount),0);
      $('total-income').textContent = format(inc);
      $('total-expenses').textContent = format(exp);
      $('net-balance').textContent = format(inc - exp);
    }

    const renderList = (filter='all') => {
      const list = $('tx-list'); list.innerHTML = '';
      const items = state.transactions.filter(t => filter==='all' ? true : t.type===filter);
      if(items.length===0){ list.innerHTML = '<div class="muted" style="padding:12px">No transactions yet</div>'; return }

      items.forEach(t => {
        const el = document.createElement('div'); el.className='tx';
        el.innerHTML = `
          <div class="left">
            <div class="dot" style="background:${t.type==='income' ? '#10b981' : '#ef4444'}"></div>
            <div>
              <div class="desc">${escapeHtml(t.desc)}</div>
              <div class="type">${t.type.toUpperCase()}</div>
            </div>
          </div>
          <div style="display:flex;align-items:center;gap:12px">
            <div class="amount">${format(t.type==='expense' ? -t.amount : t.amount)}</div>
            <div class="actions">
              <button class="btn edit" data-id="${t.id}">Edit</button>
              <button class="btn delete" data-id="${t.id}">Delete</button>
            </div>
          </div>
        `;
        list.appendChild(el);
      });

      // attach listeners
      list.querySelectorAll('.btn.edit').forEach(b => b.addEventListener('click', e => startEdit(e.target.dataset.id)));
      list.querySelectorAll('.btn.delete').forEach(b => b.addEventListener('click', e => removeTx(e.target.dataset.id)));
    }

    // small helper to prevent injection in list
    const escapeHtml = str => String(str).replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"})[s]);

    const addTx = (desc, amount, type) => {
      const tx = { id: Date.now().toString(36) + Math.random().toString(36).slice(2,8), desc, amount: Number(amount), type };
      state.transactions.unshift(tx);
      save(); calc(); renderList($('filter').value);
    }

    const removeTx = id => {
      state.transactions = state.transactions.filter(t => t.id !== id);
      save(); calc(); renderList($('filter').value);
    }

    const startEdit = id => {
      const tx = state.transactions.find(t => t.id===id);
      if(!tx) return;
      $('desc').value = tx.desc; $('amount').value = tx.amount; $('type').value = tx.type; $('submit').textContent = 'Save';
      $('submit').dataset.editId = id;
      // focus
      $('desc').focus();
    }

    const saveEdit = (id, desc, amount, type) => {
      const idx = state.transactions.findIndex(t => t.id===id);
      if(idx===-1) return;
      state.transactions[idx].desc = desc; state.transactions[idx].amount = Number(amount); state.transactions[idx].type = type;
      save(); calc(); renderList($('filter').value);
      $('submit').textContent = 'Add'; delete $('submit').dataset.editId;
    }

    const clearAll = () => {
      if(!confirm('Clear all transactions? This cannot be undone.')) return;
      state.transactions = []; save(); calc(); renderList();
    }

    // export json
    const exportJson = () => {
      const data = JSON.stringify(state, null, 2);
      const blob = new Blob([data], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'wallet-watch-export.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    // form submit
    document.getElementById('tx-form').addEventListener('submit', e => {
      e.preventDefault();
      const desc = $('desc').value.trim();
      const amt = $('amount').value;
      const type = $('type').value;
      if(!desc || !amt) return;
      const editId = $('submit').dataset.editId;
      if(editId) saveEdit(editId, desc, amt, type);
      else addTx(desc, amt, type);
      $('tx-form').reset(); $('desc').focus();
    });

    $('filter').addEventListener('change', e => renderList(e.target.value));
    $('clear-all').addEventListener('click', clearAll);
    

    // init
    load(); calc(); renderList();

  </script>
</body>
</html>
